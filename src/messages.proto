

package ham;

message Wrapper {
    enum Type { 
            CONNECT_REQUEST = 10;
            CONNECT_REPLY   = 11;
            RENAME_REQUEST  = 20;
            RENAME_REPLY    = 21;
            ENV_GET_PARAMETERS_REQUEST = 30;
            ENV_GET_PARAMETERS_REPLY = 31;
    }

    required Type type = 1;

    optional ConnectRequest connect_request = 10;
    optional ConnectReply connect_reply     = 11;
    optional RenameRequest rename_request   = 20;
    optional RenameReply rename_reply       = 21;
    optional EnvGetParametersRequest env_get_parameters_request = 31;
    optional EnvGetParametersReply env_get_parameters_reply = 32;
}

message ConnectRequest {
    required int64 id = 1;
    required string path = 2;
}

message ConnectReply {
    required int64 id = 1;
    required int32 status = 2;
}

message EnvGetParametersRequest {
    required int64 id = 1;
    repeated int32 names = 2;
}

message EnvGetParametersReply {
    required int64 id = 1;
    optional int32 cachesize = 2;
    optional int32 pagesize = 3;
    optional int32 max_env_databases = 4;
    optional int32 flags = 5;
    optional int32 filemode = 6;
    optional string filename = 7;
};

message RenameRequest {
    required int64 id = 1;
    required int32 oldname = 2;
    required int32 newname = 3;
    required int32 flags = 4;
}

message RenameReply {
    required int64 id = 1;
    required int32 status = 2;
};

